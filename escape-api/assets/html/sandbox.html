{{define "styling"}}
<style>

</style>
<link rel="stylesheet" href="/assets/stylesheets/lobby.css">
{{end}}

{{define "body"}}
<div id="container">
    <button id="lobby-gameConfigButton" onclick="showConfig()">Game Settings</button>
    <div class="config-popup">
        <div id="config-header" style="display: flex; justify-content: center;">
            <span style="font-weight: bold; font-size: large" id="config-title">Game Settings</span>
            <span style="font-size: 20px; cursor: pointer; position: absolute; right: 5%; top: 5%"
                onclick="hideConfig()">&times;</span>
        </div>
        <form id="lobby-gameConfig" style="white-space: normal;">
            <div style="display: flex; justify-content: space-around; border-bottom: 1px dashed lime;">
                <button type="button" onclick="configTabSwitch('config-general')">General</button>
                <button type="button" onclick="configTabSwitch('config-cards')">Cards</button>
                <button type="button" onclick="configTabSwitch('config-roles')">Roles</button>
            </div>
            <div id="config-general">
                <input type="number" class="text-input" id="config-numHumans" placeholder="Human Players" />
                <input type="number" class="text-input" id="config-numAliens" placeholder="Alien Players" />
                <input type="number" class="text-input" id="config-numWorkingPods" placeholder="Working Pods" />
                <input type="number" class="text-input" id="config-numBrokenPods" placeholder="Broken Pods" />
            </div>
            <div id="config-cards" style="display: none;">
                <input type="number" class="text-input" id="config-numRedCards" placeholder="Red Cards" />
                <input type="number" class="text-input" id="config-numGreenCards" placeholder="Green Cards" />
                <input type="number" class="text-input" id="config-numWhiteCards" placeholder="Silent Cards" />
                <input type="number" class="text-input" id="config-numAdrenaline" placeholder="Adrenaline Cards" />
                <input type="number" class="text-input" id="config-numClone" placeholder="Clone Cards" />
                <input type="number" class="text-input" id="config-numRedCards" placeholder="Red Cards" />
                <input type="number" class="text-input" id="config-numGreenCards" placeholder="Green Cards" />
                <input type="number" class="text-input" id="config-numWhiteCards" placeholder="Silent Cards" />
                <input type="number" class="text-input" id="config-numAdrenaline" placeholder="Adrenaline Cards" />
                <input type="number" class="text-input" id="config-numClone" placeholder="Clone Cards" />
            </div>
            <div id="config-roles" style="display: none;">
                Not yet implemented
            </div>
        </form>
    </div>
</div>
{{end}}

{{define "scripts"}}
<script src="/assets/js/utils.js"></script>
<script>
    function hideConfig() {
        var configpopup = document.querySelector(".config-popup-displayed")
        configpopup.classList.remove("config-popup-displayed")
        configpopup.classList.add("config-popup-hiding")
        if (!configpopup.onanimationend) {
            configpopup.onanimationend = () => {
                configpopup.classList.remove("config-popup-hiding")
            }
        }
    }

    function showConfig() {
        document.querySelector(".config-popup").classList.add("config-popup-displayed")
    }

    function configTabSwitch(newTab) {
        let generalConfigId = "config-general"
        let cardConfigId = "config-cards"
        let roleConfigId = "config-roles"

        let generalConfig = document.getElementById(generalConfigId)
        let cardConfig = document.getElementById(cardConfigId)
        let roleConfig = document.getElementById(roleConfigId)

        switch (newTab) {
            case generalConfigId:
                generalConfig.style.display = ''
                cardConfig.style.display = 'none';
                roleConfig.style.display = 'none';
                break;
            case cardConfigId:
                generalConfig.style.display = 'none'
                cardConfig.style.display = '';
                roleConfig.style.display = 'none';
                break;
            case roleConfigId:
                generalConfig.style.display = 'none'
                cardConfig.style.display = 'none';
                roleConfig.style.display = '';
                break;
        }
    }
</script>

{{end}}